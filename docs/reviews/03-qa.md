# Review 3: QA Tester Edge Cases

**Date:** 2025-12-19 (Fresh Review)
**Focus:** Input validation, error handling, edge cases

---

## CRITICAL Issues - 0 Found

All previous critical QA issues have been resolved.

---

## HIGH Issues - 1 Found

| # | Issue | Steps to Reproduce | File |
|---|-------|-------------------|------|
| 1 | Supervisor shows hardcoded demo data | Select Supervisor → View | supervisor/page.tsx:13-21 |

---

## MEDIUM Issues - 4 Found

| # | Issue | Steps to Reproduce | File |
|---|-------|-------------------|------|
| 2 | Decimal allows 0.0001 kg entries | Enter 0.0001 in flour | entry/page.tsx:64-72 |
| 3 | Large numbers may overflow UI | Enter 999,999,999 | Multiple |
| 4 | Strategic uses generated demo data | Select Strategic role | strategic/page.tsx:18-38 |
| 5 | No confirmation before logout | Click "Log Out & Reset" | settings/page.tsx:26-37 |

---

## LOW Issues - 5 Found

| # | Issue | File |
|---|-------|------|
| 6 | localStorage key collision theoretical | Multiple |
| 7 | No Firestore/localStorage conflict resolution | entry/page.tsx |
| 8 | Toast may be missed if on other tab | entry/page.tsx |
| 9 | History only checks 30 days | history/page.tsx:30-44 |
| 10 | Hardcoded 5-second Firebase timeout | entry/page.tsx:440-443 |

---

## Validation Test Results

| Test Case | Expected | Actual | Status |
|-----------|----------|--------|--------|
| Enter 0 kg | Hide calculations | ✅ Works | PASS |
| Enter negative | Clamp to 0 | ✅ Math.max(0) | PASS |
| Enter 999999 kg | Toast, clamp 1000 | ✅ VALIDATION_LIMITS | PASS |
| Leave all empty | Disable save | ✅ hasData check | PASS |
| Refresh mid-entry | Prompt | ✅ beforeunload | PASS |
| Browser back | Show dialog | ✅ AlertDialog | PASS |
| Deep link /entry | Redirect | ✅ useEffect guard | PASS |

---

## Fixed Since Last Review

| Fix | Evidence |
|-----|----------|
| ✅ Empty entry validation | entry/page.tsx:405 hasData |
| ✅ Negative number validation | entry/page.tsx:338 Math.max(0) |
| ✅ Maximum value limits | entry/page.tsx:339-346 |
| ✅ Form disabled during save | entry/page.tsx:73 disabled |
| ✅ Firebase timeout | entry/page.tsx:440-443 5s |
| ✅ Unsaved changes warning | entry/page.tsx:764-787 |
| ✅ Bakery guard redirect | entry/page.tsx:297-301 |

---

## Data Persistence Test

| Scenario | Status |
|----------|--------|
| Save → Refresh → Data present | ✅ PASS |
| Save → Close → Reopen | ✅ PASS |
| Offline save → Online sync | ⚠️ PARTIAL |

---

## Recommendations

1. Add decimal precision (round to 0.5)
2. Add logout confirmation dialog
3. Increase history range to 90 days
